<div *ngIf="permissao === 'ADMIN'" class="comunicados-premium-bg"></div>
<div *ngIf="permissao === 'ADMIN'" class="comunicados-premium-container">
  <div class="comunicados-premium-bar">
    <div class="comunicados-premium-bar-left">
      <mat-icon class="comunicados-premium-bar-icon">campaign</mat-icon>
      <h2 class="comunicados-premium-title">Comunicados</h2>
    </div>
    <button mat-stroked-button color="primary" class="comunicados-premium-back" (click)="onBack()">
      <mat-icon>arrow_back</mat-icon>
      Voltar
    </button>
  </div>

  <div *ngIf="paginatedComunicados.length > 0; else emptyList">
    <div class="comunicados-premium-grid">
      <div class="comunicado-premium-card" *ngFor="let comunicado of paginatedComunicados"
        matTooltip="Clique para ver detalhes" tabindex="0">
        <div class="comunicado-premium-card-glass"></div>
        <div class="comunicado-premium-card-content">
          <div class="comunicado-premium-card-header">
            <mat-icon class="comunicado-premium-card-header-icon">announcement</mat-icon>
            <h3 class="comunicado-premium-card-title">{{ comunicado.titulo }}</h3>
            <button mat-icon-button [matMenuTriggerFor]="menu" matTooltip="Ações" class="comunicado-premium-card-menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="update(comunicado)">
                <mat-icon>edit</mat-icon>
                Editar
              </button>
              <button mat-menu-item color="warn" (click)="delete(comunicado)">
                <mat-icon>delete</mat-icon>
                Excluir
              </button>
            </mat-menu>
          </div>
          <div class="comunicado-premium-card-desc">{{ comunicado.descricao }}</div>
          <div class="comunicado-premium-card-footer">
            <div class="comunicado-premium-card-author">
              <mat-icon>person</mat-icon>
              <span>{{ comunicado.usuario.nome || 'Usuário não informado' }}</span>
            </div>
            <div class="comunicado-premium-card-date">
              <mat-icon>calendar_today</mat-icon>
              <span>{{ comunicado.dataPostagem | date: 'dd/MM/yyyy' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <mat-paginator [length]="comunicados.length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
      (page)="onPageChange($event)" class="comunicados-premium-paginator">
    </mat-paginator>
  </div>

  <ng-template #emptyList>
    <div class="comunicados-premium-empty">
      <mat-icon class="comunicados-premium-empty-icon">announcement</mat-icon>
      <p>Nenhum comunicado encontrado.</p>
    </div>
  </ng-template>
</div>

<div *ngIf="permissao != 'ADMIN'" class="user-container">
  <header class="navbar navbar-expand-xl navbar-light bg-white shadow-sm fixed-top">
    <div class="container">

      <a class="navbar-brand d-flex align-items-center gap-2" [routerLink]="'home'">
        <span class="material-icons fs-1">park</span>
        <strong>Parque Brennand</strong>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#visitorNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="visitorNavbar">
        <ul class="navbar-nav mx-auto gap-md-3">

          <li class="nav-item">
            <a class="nav-link" [routerLink]="'/home'" routerLinkActive="active">
              <span class="material-icons">home</span> Início
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" [routerLink]="'/ingressos/meus'" routerLinkActive="active">
              <span class="material-icons">confirmation_number</span> Ingressos
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" [routerLink]="'/ingressos/new'" routerLinkActive="active">
              <span class="material-icons">event_available</span> Agendar
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" [routerLink]="'/grupos/homeGrupos'" routerLinkActive="active">
              <span class="material-icons">groups</span> Grupos
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" [routerLink]="'/comunicados/list'" routerLinkActive="active">
              <span class="material-icons">campaign</span> Comunicados
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" [routerLink]="'/pesquisas/new'" routerLinkActive="active">
              <span class="material-icons">poll</span> Pesquisas
            </a>
          </li>

        </ul>

        <div class="d-flex">
          <a class="btn btn-outline-danger d-flex align-items-center gap-1" [routerLink]="'/logout'">
            <span class="material-icons">logout</span> Sair
          </a>
        </div>
      </div>
    </div>
  </header>

  <div style="margin-top: 125px;" *ngIf="paginatedComunicados.length > 0; else emptyList">
    <div class="comunicados-premium-grid">
      <div class="comunicado-premium-card" *ngFor="let comunicado of paginatedComunicados"
        matTooltip="Clique para ver detalhes" tabindex="0">
        <div class="comunicado-premium-card-glass"></div>
        <div class="comunicado-premium-card-content">
          <div class="comunicado-premium-card-header">
            <mat-icon class="comunicado-premium-card-header-icon">announcement</mat-icon>
            <h3 class="comunicado-premium-card-title">{{ comunicado.titulo }}</h3>
          </div>
          <div class="comunicado-premium-card-desc">{{ comunicado.descricao }}</div>
          <div class="comunicado-premium-card-footer">
            <div class="comunicado-premium-card-author">
              <mat-icon>person</mat-icon>
              <span>{{ comunicado.usuario.nome || 'Usuário não informado' }}</span>
            </div>
            <div class="comunicado-premium-card-date">
              <mat-icon>calendar_today</mat-icon>
              <span>{{ comunicado.dataPostagem | date: 'dd/MM/yyyy' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <mat-paginator [length]="comunicados.length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
      (page)="onPageChange($event)" class="comunicados-premium-paginator">
    </mat-paginator>
  </div>

  <ng-template #emptyList>
    <div class="comunicados-premium-empty">
      <mat-icon class="comunicados-premium-empty-icon">announcement</mat-icon>
      <p>Nenhum comunicado encontradoa.</p>
    </div>
  </ng-template>
</div>
