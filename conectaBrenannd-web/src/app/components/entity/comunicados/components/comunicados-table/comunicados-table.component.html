<mat-card class="comunicados-table-container">
  <div class="header">
    <h2>Lista de Comunicados</h2>
    <button mat-raised-button color="primary" (click)="onBack()">
      <mat-icon>arrow_back</mat-icon>
      Voltar
    </button>
  </div>

  <div *ngIf="paginatedComunicados.length > 0; else emptyList">
    <div class="comunicados-grid">
      <mat-card
        class="comunicado-card"
        *ngFor="let comunicado of paginatedComunicados"
        matTooltip="Clique para ver detalhes"
      >
        <div class="card-header">
          <h3>{{ comunicado.titulo }}</h3>
          <button
            mat-icon-button
            [matMenuTriggerFor]="menu"
            matTooltip="Ações"
          >
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="update(comunicado)">
              <mat-icon>edit</mat-icon>
              Editar
            </button>
            <button mat-menu-item color="warn" (click)="delete(comunicado)">
              <mat-icon>delete</mat-icon>
              Excluir
            </button>
          </mat-menu>
        </div>

        <p class="descricao">{{ comunicado.descricao }}</p>

        <div class="detalhes">
          <mat-chip color="primary" selected>
            <mat-icon>person</mat-icon>
            {{ comunicado.usuario.nome || 'Usuário não informado' }}
          </mat-chip>

          <mat-chip color="accent" selected>
            <mat-icon>calendar_today</mat-icon>
            {{ comunicado.dataPostagem | date: 'dd/MM/yyyy' }}
          </mat-chip>
        </div>
      </mat-card>
    </div>

    <mat-paginator
      [length]="comunicados.length"
      [pageSize]="pageSize"
      [pageSizeOptions]="pageSizeOptions"
      (page)="onPageChange($event)"
    >
    </mat-paginator>
  </div>

  <ng-template #emptyList>
    <div class="empty-state">
      <mat-icon class="empty-icon">announcement</mat-icon>
      <p>Nenhum comunicado encontrado.</p>
    </div>
  </ng-template>
</mat-card>
